# 从设计思路总结 React 和 Vue 的差异

## 声明式渲染（相同点）

框架范式主要有两种：**命令式** 和 **声明式**。

早年间大范围流行的 JQuery 就是典型的命令式框架，命令式框架最大的特点是**关注过程**。

声明式渲染的特点是**关注结果**，声明出用户想要的结果，无需关心怎么实现，过程交给框架处理。

而`Vue`和`React`都是**声明式渲染**。

```
Data -> fn -> UI
```

## 概念与生态

`Vue`的定义：构建用户界面的 JavaScript 框架

`React`的定义：构建用户界面的 JavaScript 库

`Vue`官方提供了从`声明式渲染`到`构建工具`的一整套方案

`React`官方主要提供了`核心库`，`路由`、`状态管理`都由第三方提供，整合成一套方案

## 数据驱动视图更新的方式

**Vue：**`响应式数据`。Vue2 为对象`属性劫持`，Vue3 为`对象代理`，获取数据的时候`收集依赖`，更新数据的时候`派发更新`。

可以精准更新，但是收集依赖需要耗费额外的性能。

**React**：`数据不可变`。调用方法通知视图更新，重新渲染时比对数据引用是否变化，来决定是否重渲染。

数据变动会导致组件及所有子组件重新渲染，需要手动做性能优化，导致额外的心智负担。但是没有收集依赖导致的额外开销。

## 声明方式的差异

`React`推荐使用`JSX`，`Vue`推荐使用`模板`

`JSX`可以最大化利用 JS 原生能力（`逻辑判断`、`递归`、`循环`）。

`模板`需要通过框架提供的特定`指令`(`v-if`, `v-for`)实现逻辑判断和循环。

此外，`模板`最终也会编译成 render 函数，Vue 在编译过程中有标记元素、静态提升等手段，方便在运行时更快地创建`虚拟DOM`和比对。

而 JSX 本质上是`render`函数中的`React.createElement`，在编译过程中没有优化空间。

## 组件开发方式

`Vue`的组件更像是一个对象，通过配置的方式填充组件的内容和功能

`React`的组件分为函数组件和类组件，其中函数组件`主线脉络`清晰，就是将`state`映射成`UI`，其余的都是副作用，是主线的直线流程，让应用有更清晰的逻辑。

`React`倾向于让组件单一职责，划分容器组件和展示组件。

而`Vue`则是让组件完成独立的功能，没有刻意强调组件的单一职责。

具体实践中，`React`需要开发者自己注重性能优化，因为`props`和`state`的改变会触发自身的重新渲染，在没有优化的情况下，使用`state`的所有子组件也会重新渲染。

而`Vue`的`响应式数据`能准确地知道数据变更会触发哪些组件进行更新。

## 状态管理差异

Vue：Vuex、Pinia（响应式）

React：Redux（函数式）、Mobx（响应式）
