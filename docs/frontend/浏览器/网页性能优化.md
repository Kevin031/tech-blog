# 性能优化

## 网页性能评判标准

### 首次内容绘制（FCP）

测量页面从开始加载页面到页面内容的**任何部分**在屏幕上完成渲染的时间。

这里强调的是部分内容，并非所有内容。

评判标准：

0-1.8s 良好

1.9s-3.0s 需要改进

3.1s 以上 较差

此指标对于没有使用 SSR 技术的项目意义不大，因为通常需要等待 JS 加载完毕才会开始绘制

### 最大内容绘制（LCP）

根据页面首次开始加载的时间点来计算可视区域内可见的最大内容块完成渲染的相对时间。

评判标准：

0-2.5s 良好

2.6s-4.0s 需要改进

4.1s 以上 较差

### 总阻塞时间（TBT）

测量首次内容绘制（FCP） 与可交互时间（TTI）之间的总时间。

0-0.2s 良好

0.2s-0.6s 需要改进

0.6s 以上 较差

### 累积布局偏移（CLS）

测量整个页面生命周期内发生的所有意外布局偏移中最大一连串的布局偏移分数。

是测量视觉稳定性的一个重要指标，确保页面是令人愉悦的。

### 速度指标（SI）

表示页面可视区域中内容的填充速度的指标。

捕获页面出现像素点的时间。

评判标准：

0-3.4s 良好

3.4s-5.8s 需要改进

5.8s 以上 较差

## 性能优化的常用方法

### 客户端

1. `link` 标签提前，`script` 标签置后（避免 js 运行导致 html 渲染阻塞）

2. 对于引入三方的 `script` 和 `link` 标签加上 `async` 或 `defer`

3. 资源 `dns` 预解析

4. 代码体积压缩和树摇

5. 资源预连接，例如`<link rel="preconnect" />`，提前通知浏览器与另一个源建立连接

6. 代码分割和动态加载、按需引入，减少首屏请求的资源

### 服务端

1. 减少服务器的响应时间，例如使用 `HTTP2` 提高性能

2. 使用接口缓存：强缓存或协商缓存

3. 压缩图片、图片资源走 `CDN`、懒加载

4. 启用 `gzip` 压缩，进一步压缩代码体积
